 BEGIN L#LANNAJ

/////////////////////////////////////////////////
////////////// SWORD TALKS //////////////////////
/////////////////////////////////////////////////

//1ST SWORD TALK

CHAIN IF ~Global("L#LannaQuest","GLOBAL",2)~ THEN L#LANNAJ SWORD1.00
@0
END
IF~~THEN REPLY @1 EXTERN L#LANNAJ SWORD1.01
IF~~THEN REPLY @2 EXTERN L#LANNAJ SWORD1.02

CHAIN L#LANNAJ SWORD1.01
@3
==L#LANNAJ @4
DO ~SetGlobal("L#LannaQuest","GLOBAL",3)~ EXIT

CHAIN L#LANNAJ SWORD1.02
@5
==L#LANNAJ @6
DO ~SetGlobal("L#LannaQuest","GLOBAL",3)~ EXIT

//2ND SWORD TALK

CHAIN IF ~Global("L#LannaQuest","GLOBAL",4)~ THEN L#LANNAJ SWORD2.00
@7
==L#LANNAJ @8
==L#LANNAJ @9
END
IF~~THEN REPLY @10 EXTERN L#LANNAJ SWORD2.01
IF~~THEN REPLY @11 EXTERN L#LANNAJ SWORD2.01

CHAIN L#LANNAJ SWORD2.01
@12
END
IF~~THEN REPLY @13 EXTERN L#LANNAJ SWORD2.02
IF~~THEN REPLY @14 EXTERN L#LANNAJ SWORD2.02

CHAIN L#LANNAJ SWORD2.02
@15
==L#LANNAJ @16
END
IF~~THEN REPLY @17 EXTERN L#LANNAJ SWORD2.03
IF~~THEN REPLY @18 EXTERN L#LANNAJ SWORD2.04

CHAIN L#LANNAJ SWORD2.03
@19
DO ~SetGlobal("L#LannaQuest","GLOBAL",5)~ EXIT

CHAIN L#LANNAJ SWORD2.04
@20
==L#LANNAJ @21
DO ~SetGlobal("L#LannaQuest","GLOBAL",5)~ EXIT

//2ND SWORD TALK - FAIL

CHAIN IF ~Global("L#LannaQuest","GLOBAL",3) Global("L#LannaFailQuest","GLOBAL",1)~ THEN L#LANNAJ SWORD2.F0
@22
DO ~SetGlobal("L#LannaFailQuest","GLOBAL",2)~ EXIT

//3RD SWORD TALK

CHAIN IF ~Global("L#LannaQuest","GLOBAL",6)~ THEN L#LANNAJ SWORD3.00
@23
==L#LANNAJ @24
END
IF~~THEN REPLY @25 EXTERN L#LANNAJ SWORD3.01
IF~~THEN REPLY @26 EXTERN L#LANNAJ SWORD3.02

CHAIN L#LANNAJ SWORD3.01
@27
==L#LANNAJ @28
END
IF~~THEN REPLY @29 EXTERN L#LANNAJ SWORD3.03
IF~~THEN REPLY @30 EXTERN L#LANNAJ SWORD3.04
IF~~THEN REPLY @31 EXTERN L#LANNAJ SWORD3.03

CHAIN L#LANNAJ SWORD3.03
@32
==L#LANNAJ @33
==L#LANNAJ @34
END
IF~Race(Player1,ELF)~THEN REPLY @14 EXTERN L#LANNAJ SWORD3.05
IF~!Race(Player1,ELF)~THEN REPLY @14 EXTERN L#LANNAJ SWORD3.06
IF~~THEN REPLY @35 EXTERN L#LANNAJ SWORD3.04

CHAIN L#LANNAJ SWORD3.05
@36
==L#LANNAJ @37
==L#LANNAJ @38
EXTERN L#LANNAJ SWORD3.07

CHAIN L#LANNAJ SWORD3.06
@39
==L#LANNAJ @40
==L#LANNAJ @41
EXTERN L#LANNAJ SWORD3.07

CHAIN L#LANNAJ SWORD3.07
@42
END
IF~~THEN REPLY @43 EXTERN L#LANNAJ SWORD3.08
IF~~THEN REPLY @44 EXTERN L#LANNAJ SWORD3.08
IF~~THEN REPLY @45 EXTERN L#LANNAJ SWORD3.04

CHAIN L#LANNAJ SWORD3.08
@46
==L#LANNAJ @47
DO ~SetGlobal("L#LannaQuest","GLOBAL",7)~ EXIT

CHAIN L#LANNAJ SWORD3.04
@48
==L#LANNAJ @49
DO ~SetGlobal("L#LannaQuest","GLOBAL",7) SetGlobal("L#LannaRelationKiller","GLOBAL",1)~ EXIT

CHAIN L#LANNAJ SWORD3.02
@50
DO ~SetGlobal("L#LannaQuest","GLOBAL",7) SetGlobal("L#LannaRelationKiller","GLOBAL",1)~ EXIT

//3RD SWORD TALK - FAIL

CHAIN IF ~Global("L#LannaQuest","GLOBAL",3) Global("L#LannaFailQuest","GLOBAL",3)~ THEN L#LANNAJ SWORD3.F0
@51
DO ~SetGlobal("L#LannaFailQuest","GLOBAL",4) LeaveParty() EscapeArea()~ EXIT

//4TH SWORD TALK

CHAIN IF ~Global("L#LannaQuest","GLOBAL",8)~ THEN L#LANNAJ SWORD4.00
@52
==DWEENOG @53
==L#LANNAJ @54
==DWEENOG @55
==L#LANNAJ @56
==DWEENOG @57
==L#LANNAJ @58
==DWEENOG @59
==DWEENOG @60
==DWEENOG @61
==DWEENOG @62
==L#LANNAJ @63
==L#LANNAJ @64
==L#LANNAJ @65
DO ~SetGlobal("L#LannaQuest","GLOBAL",9)~ EXIT

//5TH SWORD TALK

EXTEND_TOP ~DORRICK~ 0
IF~Global("L#LannaQuest","GLOBAL",9)~THEN REPLY @66 EXTERN DORRICK L#LANNA-ORR-BOOK1
END

EXTEND_TOP ~DORRICK~ 16
IF~Global("L#LannaQuest","GLOBAL",9)~THEN REPLY @66 EXTERN DORRICK L#LANNA-ORR-BOOK1
END

EXTEND_TOP ~DORRICK~ 38
IF~Global("L#LannaQuest","GLOBAL",9)~THEN REPLY @66 EXTERN DORRICK L#LANNA-ORR-BOOK1
END

EXTEND_TOP ~DORRICK~ 28
IF~Global("L#LannaQuest","GLOBAL",9)~THEN REPLY @66 EXTERN DORRICK L#LANNA-ORR-BOOK1
END

EXTEND_TOP ~DORRICK~ 23
IF~Global("L#LannaQuest","GLOBAL",9)~THEN REPLY @66 EXTERN DORRICK L#LANNA-ORR-BOOK1
END

EXTEND_TOP ~DORRICK~ 2
IF~Global("L#LannaQuest","GLOBAL",9)~THEN REPLY @66 EXTERN DORRICK L#LANNA-ORR-BOOK1
END

EXTEND_TOP ~DORRICK~ 18
IF~Global("L#LannaQuest","GLOBAL",9)~THEN REPLY @66 EXTERN DORRICK L#LANNA-ORR-BOOK1
END

CHAIN DORRICK L#LANNA-ORR-BOOK1
@67
==L#LANNAJ @68
==L#LANNAJ @69
==DORRICK @70
==L#LANNAJ @71
==L#LANNAJ @72
==DORRICK @73
==DORRICK @74
==L#LANNAJ @75
==DORRICK @76
==L#LANNAJ @77
==L#LANNAJ @78
DO ~SetGlobal("L#LannaQuest","GLOBAL",10)~ EXIT

//6TH SWORD TALK

CHAIN IF ~Global("L#LannaQuest","GLOBAL",11)~ THEN L#LANNAJ SWORD6.00
@79
==DWEENOG @80
==DWEENOG @81
==L#LANNAJ @9
==DWEENOG @82
==L#LANNAJ @83
END
IF~~THEN REPLY @84 EXTERN L#LANNAJ SWORD6.01
IF~~THEN REPLY @85 EXTERN L#LANNAJ SWORD6.02

CHAIN L#LANNAJ SWORD6.01
@86
EXTERN L#LANNAJ SWORD6.03

CHAIN L#LANNAJ SWORD6.02
@87
EXTERN L#LANNAJ SWORD6.03

CHAIN L#LANNAJ SWORD6.03
@88
==DWEENOG @89
==L#LANNAJ @90
==DWEENOG @91
==DWEENOG @92
==DWEENOG @93
==L#LANNAJ @94
==L#LANNAJ @95
==DWEENOG @96
DO ~SetGlobal("L#LannaQuest","GLOBAL",12)~ EXIT

//7TH SWORD TALK

CHAIN IF ~Global("L#LannaQuest","GLOBAL",13)~ THEN L#LANNAJ SWORD7.00
@97
END
IF~~THEN REPLY @98 EXTERN L#LANNAJ SWORD7.01
IF~~THEN REPLY @99 EXTERN L#LANNAJ SWORD7.01

CHAIN L#LANNAJ SWORD7.01
@100
==L#LANNAJ @101
==L#LANNAJ @102
==L#LANNAJ @103
END
IF~~THEN REPLY @104 EXTERN L#LANNAJ SWORD7.02
IF~~THEN REPLY @105 EXTERN L#LANNAJ SWORD7.03

CHAIN L#LANNAJ SWORD7.02
@86
DO ~SetGlobal("L#LannaQuest","GLOBAL",14) SetGlobalTimer("L#LannaSwordMillTime","GLOBAL",2400)~ EXIT

CHAIN L#LANNAJ SWORD7.03
@106
DO ~SetGlobal("L#LannaQuest","GLOBAL",14) LeaveParty() EscapeArea()~ EXIT

//8TH SWORD TALK

CHAIN IF ~Global("L#LannaQuest","GLOBAL",14) Global("L#LannaMillFaster","GLOBAL",1)~ THEN L#LANNAJ SWORD8.F0
@107
DO ~SetGlobalTimer("L#LannaSwordMillTime","GLOBAL",2400) SetGlobal("L#LannaMillFaster","GLOBAL",2)~ EXIT

CHAIN IF ~Global("L#LannaQuest","GLOBAL",14) Global("L#LannaMillFaster","GLOBAL",3)~ THEN L#LANNAJ SWORD8.F0
@108
DO ~SetGlobal("L#LannaMillFaster","GLOBAL",4) LeaveParty() EscapeArea()~ EXIT

CHAIN IF ~Global("L#LannaQuest","GLOBAL",15)~ THEN L#LANNAJ SWORD8.00
@109
==L#LANNAJ @110
==L#LANNAJ @111
DO ~StartCutSceneMode() SetGlobal("L#LannaQuest","GLOBAL",16) FadeToColor([20.0],0) Wait(3) FadeFromColor([20.0],0) GiveItemCreate("l#lanfsw","L#LANNA",1,1,0) EndCutSceneMode() StartDialogueNoSet(Player1)~ EXIT

//9TH SWORD TALK

CHAIN IF ~Global("L#LannaQuest","GLOBAL",16)~ THEN L#LANNAJ SWORD9.00
@112
==L#LANNAJ @113
==L#LANNAJ @114
END
IF~~THEN REPLY @14 EXTERN L#LANNAJ SWORD9.01
IF~~THEN REPLY @115 EXTERN L#LANNAJ SWORD9.01
IF~~THEN REPLY @116 EXTERN L#LANNAJ SWORD9.01
IF~~THEN REPLY @117 EXTERN L#LANNAJ SWORD9.01

CHAIN L#LANNAJ SWORD9.01
@118
END
IF~~THEN REPLY @119 EXTERN L#LANNAJ SWORD9.02
IF~~THEN REPLY @120 EXTERN L#LANNAJ SWORD9.02

CHAIN L#LANNAJ SWORD9.02
@121
==L#LANNAJ @122
END
IF~~THEN REPLY @123 EXTERN L#LANNAJ SWORD9.03
IF~~THEN REPLY @124 EXTERN L#LANNAJ SWORD9.04

CHAIN L#LANNAJ SWORD9.03
@125
EXTERN L#LANNAJ SWORD9.04x

CHAIN L#LANNAJ SWORD9.04
@126
EXTERN L#LANNAJ SWORD9.04x

CHAIN L#LANNAJ SWORD9.04x
@127
END
IF~~THEN REPLY @9 EXTERN L#LANNAJ SWORD9.05
IF~~THEN REPLY @128 EXTERN L#LANNAJ SWORD9.05

CHAIN L#LANNAJ SWORD9.05
@129
==L#LANNAJ @130
END
IF~~THEN REPLY @131 EXTERN L#LANNAJ SWORD9.06
IF~~THEN REPLY @132 EXTERN L#LANNAJ SWORD9.07
IF~~THEN REPLY @133 EXTERN L#LANNAJ SWORD9.08

CHAIN L#LANNAJ SWORD9.06
@134
EXTERN L#LANNAJ SWORD9.07

CHAIN L#LANNAJ SWORD9.08
@135
EXTERN L#LANNAJ SWORD9.07

CHAIN L#LANNAJ SWORD9.07
@136
DO ~SetGlobal("L#LannaQuest","GLOBAL",17) RealSetGlobalTimer("L#LannaHasFSwordTime","GLOBAL",300)~ EXIT

//10TH SWORD TALK

CHAIN IF ~Global("L#LannaQuest","GLOBAL",18)~ THEN L#LANNAJ SWORD10.00
@137
END
IF~~THEN REPLY @138 EXTERN L#LANNAJ SWORD10.01
IF~~THEN REPLY @139 EXTERN L#LANNAJ SWORD10.02

CHAIN L#LANNAJ SWORD10.01
@140
EXTERN L#LANNAJ SWORD10.03

CHAIN L#LANNAJ SWORD10.02
@141
EXTERN L#LANNAJ SWORD10.03

CHAIN L#LANNAJ SWORD10.03
@142
==L#LANNAJ @143
==L#LANNAJ @144
DO ~SetGlobal("L#LannaQuest","GLOBAL",19) RealSetGlobalTimer("L#LannaHasFSwordTime","GLOBAL",1200)~ EXIT

//11TH SWORD TALK

CHAIN IF ~Global("L#LannaQuest","GLOBAL",20)~ THEN L#LANNAJ SWORD11.00
@145
END
IF~~THEN REPLY @146 EXTERN L#LANNAJ SWORD11.01
IF~~THEN REPLY @147 EXTERN L#LANNAJ SWORD11.02
IF~~THEN REPLY @148 EXTERN L#LANNAJ SWORD11.01
IF~~THEN REPLY @149 EXTERN L#LANNAJ SWORD11.03

CHAIN L#LANNAJ SWORD11.01
@150
EXTERN L#LANNAJ SWORD11.04

CHAIN L#LANNAJ SWORD11.02
@151
EXTERN L#LANNAJ SWORD11.04

CHAIN L#LANNAJ SWORD11.04
@152
==L#LANNAJ @153
==L#LANNAJ @154
END
IF~~THEN REPLY @155 EXTERN L#LANNAJ SWORD11.05
IF~~THEN REPLY @156 EXTERN L#LANNAJ SWORD11.03

CHAIN L#LANNAJ SWORD11.05
@157
==L#LANNAJ @158
END
IF~~THEN REPLY @159 EXTERN L#LANNAJ SWORD11.06
IF~~THEN REPLY @160 EXTERN L#LANNAJ SWORD11.06
IF~~THEN REPLY @161 EXTERN L#LANNAJ SWORD11.03
IF~~THEN REPLY @162 EXTERN L#LANNAJ SWORD11.03
IF~~THEN REPLY @163 EXTERN L#LANNAJ SWORD11.03

CHAIN L#LANNAJ SWORD11.06
@164
==L#LANNAJ @165
DO ~SetGlobal("L#LannaQuest","GLOBAL",21)~ EXIT

CHAIN L#LANNAJ SWORD11.03
@166
DO ~SetGlobal("L#LannaQuest","GLOBAL",21)~ EXIT

//12TH SWORD TALK

CHAIN IF ~Global("L#LannaQuest","GLOBAL",22)~ THEN L#LANNAJ SWORD12.00
@167
END
IF~~THEN REPLY @168 EXTERN L#LANNAJ SWORD12.01
IF~~THEN REPLY @169 EXTERN L#LANNAJ SWORD12.02

CHAIN L#LANNAJ SWORD12.01
@170
EXTERN L#LANNAJ SWORD12.03

CHAIN L#LANNAJ SWORD12.02
@171
EXTERN L#LANNAJ SWORD12.03

CHAIN L#LANNAJ SWORD12.03
@172
==L#LANNAJ @173
DO ~SetGlobal("L#LannaQuest","GLOBAL",23)~ EXIT

//13TH SWORD TALK

CHAIN IF ~Global("L#LannaQuest","GLOBAL",24)~ THEN L#LANNAJ SWORD13.00
@174
END
IF~~THEN REPLY @175 EXTERN L#LANNAJ SWORD13.01
IF~~THEN REPLY @176 EXTERN L#LANNAJ SWORD13.01

CHAIN L#LANNAJ SWORD13.01
@177
DO ~SetGlobal("L#LannaQuest","GLOBAL",25) StartCutScene("L#LASWCS")~ EXIT

//14TH SWORD TALK

CHAIN IF ~Global("L#LannaQuest","GLOBAL",26)~ THEN L#LANNAJ SWORD14.00
@178
END
IF~~THEN REPLY @179 EXTERN L#LANNAJ SWORD14.01
IF~~THEN REPLY @180 EXTERN L#LANNAJ SWORD14.02

CHAIN L#LANNAJ SWORD14.01
@181
EXTERN L#LANNAJ SWORD14.03x

CHAIN L#LANNAJ SWORD14.02
@182
EXTERN L#LANNAJ SWORD14.03x

CHAIN L#LANNAJ SWORD14.03x
@183
==L#LANNAJ @184
==L#LANNAJ @185
END
IF~~THEN REPLY @186 EXTERN L#LANNAJ SWORD14.03
IF~~THEN REPLY @187 EXTERN L#LANNAJ SWORD14.04

CHAIN L#LANNAJ SWORD14.03
@188
==L#LANNAJ @189
DO ~SetGlobal("L#LannaQuest","GLOBAL",27) AddexperienceParty(12000) AddXPObject("L#LANNA",5500)~ EXIT

CHAIN L#LANNAJ SWORD14.04
@190
DO ~SetGlobal("L#LannaQuest","GLOBAL",27) AddexperienceParty(12000) AddXPObject("L#LANNA",5500)~ EXIT

////////////////////////////////////////////
/////////// SCENERY TALKS///////////////////
////////////////////////////////////////////

//ELF IN KULDAHAR (ELVES)

CHAIN IF ~Global("L#LannaKuldaharStatue","GLOBAL",1)~ THEN L#LANNAJ ELFINK.00
@191
END
IF~~THEN REPLY @192 EXTERN L#LANNAJ ELFINK.01
IF~~THEN REPLY @193 EXTERN L#LANNAJ ELFINK.06
IF~~THEN REPLY @194 EXTERN L#LANNAJ ELFINK.02

CHAIN L#LANNAJ ELFINK.01
@195
END
IF~~THEN REPLY @196 EXTERN L#LANNAJ ELFINK.03
IF~~THEN REPLY @197 EXTERN L#LANNAJ ELFINK.04
IF~Global("L#LannaRomanceMatch","GLOBAL",1)~THEN REPLY @198 EXTERN L#LANNAJ ELFINK.0R
IF~~THEN REPLY @199 EXTERN L#LANNAJ ELFINK.02

CHAIN L#LANNAJ ELFINK.04
@200
END
IF~~THEN REPLY @201 EXTERN L#LANNAJ ELFINK.05
IF~~THEN REPLY @202 EXTERN L#LANNAJ ELFINK.06

CHAIN L#LANNAJ ELFINK.0R
@203
==L#LANNAJ @204
==L#LANNAJ @205
DO ~SetGlobal("L#LannaKuldaharStatue","GLOBAL",2) SetGlobal("L#LannaRomanceSituation_A","GLOBAL",1)~ EXIT

CHAIN L#LANNAJ ELFINK.03
@206
==L#LANNAJ @207
DO ~SetGlobal("L#LannaKuldaharStatue","GLOBAL",2) SetGlobal("L#LannaRomanceSituation_A","GLOBAL",1)~ EXIT

CHAIN L#LANNAJ ELFINK.05
@208
DO ~SetGlobal("L#LannaKuldaharStatue","GLOBAL",2) SetGlobal("L#LannaRomanceSituation_A","GLOBAL",1)~ EXIT

CHAIN L#LANNAJ ELFINK.06
@209
DO ~SetGlobal("L#LannaKuldaharStatue","GLOBAL",2)~ EXIT

CHAIN L#LANNAJ ELFINK.02
@210
DO ~SetGlobal("L#LannaKuldaharStatue","GLOBAL",2)~ EXIT

//VALE OF SHADOWS

CHAIN IF ~Global("L#LannaVale","GLOBAL",2)~ THEN L#LANNAJ VOS.00
@211
END
IF~~THEN REPLY @212 EXTERN L#LANNAJ VOS.01
IF~~THEN REPLY @213 EXTERN L#LANNAJ VOS.02
IF~~THEN REPLY @214 EXTERN L#LANNAJ VOS.03

CHAIN L#LANNAJ VOS.01
@215
END
IF~~THEN REPLY @216 EXTERN L#LANNAJ VOS.04
IF~~THEN REPLY @217 EXTERN L#LANNAJ VOS.03

CHAIN L#LANNAJ VOS.02
@218
END
IF~~THEN REPLY @219 EXTERN L#LANNAJ VOS.05
IF~~THEN REPLY @220 EXTERN L#LANNAJ VOS.03

CHAIN L#LANNAJ VOS.04
@221
EXTERN L#LANNAJ VOS.06

CHAIN L#LANNAJ VOS.05
@222
EXTERN L#LANNAJ VOS.06

CHAIN L#LANNAJ VOS.06
@223
END
IF~~THEN REPLY @224 EXTERN L#LANNAJ VOS.07
IF~~THEN REPLY @225 EXTERN L#LANNAJ VOS.08
IF~~THEN REPLY @226 EXTERN L#LANNAJ VOS.09
IF~~THEN REPLY @227 EXTERN L#LANNAJ VOS.03

CHAIN L#LANNAJ VOS.07
@228
EXTERN L#LANNAJ VOS.10

CHAIN L#LANNAJ VOS.08
@229
EXTERN L#LANNAJ VOS.10

CHAIN L#LANNAJ VOS.09
@230
EXTERN L#LANNAJ VOS.10

CHAIN L#LANNAJ VOS.03
@231
EXTERN L#LANNAJ VOS.10

CHAIN L#LANNAJ VOS.10
@232
END
IF~~THEN REPLY @233 EXTERN L#LANNAJ VOS.11
IF~~THEN REPLY @234 EXTERN L#LANNAJ VOS.11
IF~~THEN REPLY @235 EXTERN L#LANNAJ VOS.12


CHAIN L#LANNAJ VOS.11
@236
==L#LANNAJ @237
DO ~SetGlobal("L#LannaVale","GLOBAL",3) GiveItemCreate("l#lawat",Player1,2,0,0)~ EXIT

CHAIN L#LANNAJ VOS.12
@238
==L#LANNAJ @239
DO ~SetGlobal("L#LannaVale","GLOBAL",3) GiveItemCreate("l#lawat",Player1,2,0,0)~ EXIT

//VALE, TOMB OF K. - 2ND LEVEL

CHAIN IF ~Global("L#LannaTombK","GLOBAL",1)~ THEN L#LANNAJ K.T.00
@240
END
IF~~THEN REPLY @241 EXTERN L#LANNAJ K.T.01
IF~~THEN REPLY @242 EXTERN L#LANNAJ K.T.02
IF~~THEN REPLY @243 EXTERN L#LANNAJ K.T.03

CHAIN L#LANNAJ K.T.01
@244
EXTERN L#LANNAJ K.T.04

CHAIN L#LANNAJ K.T.02
@245
EXTERN L#LANNAJ K.T.04

CHAIN L#LANNAJ K.T.04
@246
==L#LANNAJ @247
END
IF~Race(Player1,ELF)~THEN REPLY @248 EXTERN L#LANNAJ K.T.05
IF~Race(Player1,HALF_ELF)~THEN REPLY @249 EXTERN L#LANNAJ K.T.06
IF~~THEN REPLY @250 EXTERN L#LANNAJ K.T.07
IF~~THEN REPLY @251 EXTERN L#LANNAJ K.T.07
IF~~THEN REPLY @252 EXTERN L#LANNAJ K.T.03

CHAIN L#LANNAJ K.T.05
@253
EXTERN L#LANNAJ K.T.08

CHAIN L#LANNAJ K.T.06
@254
EXTERN L#LANNAJ K.T.08

CHAIN L#LANNAJ K.T.07
@255
EXTERN L#LANNAJ K.T.08

CHAIN L#LANNAJ K.T.08
@256
==L#LANNAJ @257
==L#LANNAJ @258
==L#LANNAJ @259
==L#LANNAJ @260
==L#LANNAJ @261
==L#LANNAJ IF ~Race(Player1,ELF)~ THEN @262
==L#LANNAJ @263
END
IF~~THEN REPLY @264 EXTERN L#LANNAJ K.T.09
IF~Global("L#LannaRomanceMatch","GLOBAL",1)~THEN REPLY @265 EXTERN L#LANNAJ K.T.09
IF~~THEN REPLY @266 EXTERN L#LANNAJ K.T.10
IF~~THEN REPLY @267 EXTERN L#LANNAJ K.T.03

CHAIN L#LANNAJ K.T.09
@268
EXTERN L#LANNAJ K.T.11

CHAIN L#LANNAJ K.T.10
@269
EXTERN L#LANNAJ K.T.11

CHAIN L#LANNAJ K.T.11
@270
END
IF~~THEN REPLY @271 EXTERN L#LANNAJ K.T.12
IF~~THEN REPLY @272 EXTERN L#LANNAJ K.T.03

CHAIN L#LANNAJ K.T.12
@273
DO ~SetGlobal("L#LannaTombK","GLOBAL",2)~ EXIT

CHAIN L#LANNAJ K.T.03
@274
DO ~SetGlobal("L#LannaTombK","GLOBAL",2)~ EXIT

//DRAGON EYE

CHAIN IF ~Global("L#LannaDragonEye","GLOBAL",1)~ THEN L#LANNAJ D.E.00
@275
END
IF~~THEN REPLY @276 EXTERN L#LANNAJ D.E.03
IF~OR(2) Race(Player1,ELF) CheckStatGT(Player1,25,LORE)~THEN REPLY @277 EXTERN L#LANNAJ D.E.02
IF~CheckStatLT(Player1,26,LORE)~THEN REPLY @278 EXTERN L#LANNAJ D.E.01
IF~~THEN REPLY @279 EXTERN L#LANNAJ D.E.04

CHAIN L#LANNAJ D.E.01
@280
EXTERN L#LANNAJ D.E.03

CHAIN L#LANNAJ D.E.02
@281
EXTERN L#LANNAJ D.E.03

CHAIN L#LANNAJ D.E.03
@282
END
IF~~THEN REPLY @283 EXTERN L#LANNAJ D.E.05
IF~~THEN REPLY @284 EXTERN L#LANNAJ D.E.04

CHAIN L#LANNAJ D.E.05
@285
==L#LANNAJ @286
END
IF~OR(2) Race(Player1,ELF) CheckStatGT(Player1,25,LORE)~THEN REPLY @287 EXTERN L#LANNAJ D.E.07
IF~~THEN REPLY @288 EXTERN L#LANNAJ D.E.06
IF~~THEN REPLY @289 EXTERN L#LANNAJ D.E.04

CHAIN L#LANNAJ D.E.06
@290
EXTERN L#LANNAJ D.E.08

CHAIN L#LANNAJ D.E.07
@291
EXTERN L#LANNAJ D.E.08

CHAIN L#LANNAJ D.E.08
@292
==L#LANNAJ @293
==L#LANNAJ @294
==L#LANNAJ @295
END
IF~~THEN REPLY @296 EXTERN L#LANNAJ D.E.09
IF~~THEN REPLY @297 EXTERN L#LANNAJ D.E.10

CHAIN L#LANNAJ D.E.09
@298
==L#LANNAJ @299
END
IF~~THEN REPLY @300 EXTERN L#LANNAJ D.E.11
IF~Global("L#LannaRomanceMatch","GLOBAL",1)~THEN REPLY @301 EXTERN L#LANNAJ D.E.R1
IF~~THEN REPLY @302 EXTERN L#LANNAJ D.E.10
IF~~THEN REPLY @303 EXTERN L#LANNAJ D.E.04

CHAIN L#LANNAJ D.E.R1
@304
END
IF~~THEN REPLY @305 EXTERN L#LANNAJ D.E.R2
IF~~THEN REPLY @306 EXTERN L#LANNAJ D.E.R3
IF~~THEN REPLY @307 EXTERN L#LANNAJ D.E.10

CHAIN L#LANNAJ D.E.R2
@308
==L#LANNAJ @309
DO ~SetGlobal("L#LannaDragonEye","GLOBAL",2)~ EXIT

CHAIN L#LANNAJ D.E.R3
@310
==L#LANNAJ @311
DO ~SetGlobal("L#LannaDragonEye","GLOBAL",2)~ EXIT

CHAIN L#LANNAJ D.E.11
@312
DO ~SetGlobal("L#LannaDragonEye","GLOBAL",2)~ EXIT

CHAIN L#LANNAJ D.E.10
@313
DO ~SetGlobal("L#LannaDragonEye","GLOBAL",2) SetGlobal("L#LannaRelationKiller","GLOBAL",1)~ EXIT

CHAIN L#LANNAJ D.E.04
@314
DO ~SetGlobal("L#LannaDragonEye","GLOBAL",2) SetGlobal("L#LannaRelationKiller","GLOBAL",1)~ EXIT

//YXUNOMEI

CHAIN IF ~Global("L#LannaYxunomei","GLOBAL",1)~ THEN L#LANNAJ YX.00
@315
END
IF~~THEN REPLY @316 EXTERN L#LANNAJ YX.01
IF~~THEN REPLY @317 EXTERN L#LANNAJ YX.02
IF~~THEN REPLY @318 EXTERN L#LANNAJ YX.03

CHAIN L#LANNAJ YX.01
@319
==L#LANNAJ @320
DO ~SetGlobal("L#LannaYxunomei","GLOBAL",2)~ EXIT

CHAIN L#LANNAJ YX.02
@321
==L#LANNAJ @322
DO ~SetGlobal("L#LannaYxunomei","GLOBAL",2)~ EXIT

CHAIN L#LANNAJ YX.03
@323
DO ~SetGlobal("L#LannaYxunomei","GLOBAL",2)~ EXIT

//SEVERED HAND

CHAIN IF ~Global("L#LannaHand1","GLOBAL",1)~ THEN L#LANNAJ S.H.00
@324
END
IF~~THEN REPLY @325 EXTERN L#LANNAJ S.H.01
IF~~THEN REPLY @326 EXTERN L#LANNAJ S.H.02
IF~~THEN REPLY @327 EXTERN L#LANNAJ S.H.03
IF~~THEN REPLY @328 EXTERN L#LANNAJ S.H.04

CHAIN L#LANNAJ S.H.01
@329
EXTERN L#LANNAJ S.H.05

CHAIN L#LANNAJ S.H.02
@330
EXTERN L#LANNAJ S.H.05

CHAIN L#LANNAJ S.H.03
@331
EXTERN L#LANNAJ S.H.05

CHAIN L#LANNAJ S.H.05
@332
END
IF~~THEN REPLY @333 EXTERN L#LANNAJ S.H.06
IF~Race(Player1,ELF)~THEN REPLY @334 EXTERN L#LANNAJ S.H.07
IF~~THEN REPLY @335 EXTERN L#LANNAJ S.H.08
IF~~THEN REPLY @336 EXTERN L#LANNAJ S.H.04

CHAIN L#LANNAJ S.H.06
@337
DO ~SetGlobal("L#LannaHand1","GLOBAL",2)~ EXIT

CHAIN L#LANNAJ S.H.07
@338
==L#LANNAJ @339
DO ~SetGlobal("L#LannaHand1","GLOBAL",2)~ EXIT

CHAIN L#LANNAJ S.H.08
@340
DO ~SetGlobal("L#LannaHand1","GLOBAL",2)~ EXIT

CHAIN L#LANNAJ S.H.04
@341
DO ~SetGlobal("L#LannaHand1","GLOBAL",2)~ EXIT

//SEVERED HAND: LETHIAS

CHAIN IF ~Global("L#LannaLethias","GLOBAL",2)~ THEN L#LANNAJ S.H.L.00
@342
END
IF~~THEN REPLY @343 EXTERN L#LANNAJ S.H.L.01
IF~~THEN REPLY @344 DO ~SetGlobal("L#LannaLethias","GLOBAL",3)~ EXIT

CHAIN L#LANNAJ S.H.L.01
@345
==L#LANNAJ @346
DO ~SetGlobal("L#LannaLethias","GLOBAL",3)~ EXIT

//MYTHAL BOOK

CHAIN IF ~Global("L#LannaBookMythal","GLOBAL",1)~ THEN L#LANNAJ M.B.R.00
@347
==L#LANNAJ @348
END
IF~GlobalGT("Orrick_Quest","GLOBAL",0) GlobalLT("Orrick_Quest","GLOBAL",4)~THEN REPLY @349 EXTERN L#LANNAJ M.B.R.01
IF~~THEN REPLY @350 EXTERN L#LANNAJ M.B.R.02
IF~~THEN REPLY @351 EXTERN L#LANNAJ M.B.R.03

CHAIN L#LANNAJ M.B.R.01
@352
END
IF~~THEN REPLY @353 EXTERN L#LANNAJ M.B.R.02
IF~~THEN REPLY @354 EXTERN L#LANNAJ M.B.R.03

CHAIN L#LANNAJ M.B.R.02
@355
==L#LANNAJ @356
DO ~TakePartyItem("BOOKMYT") DestroyItem("BOOKMYT") SetGlobalTimer("L#LannaBookMTime","GLOBAL",FOUR_DAYS) SetGlobal("L#LannaBookMythal","GLOBAL",3)~ EXIT

CHAIN L#LANNAJ M.B.R.03
@357
DO ~SetGlobal("L#LannaBookMythal","GLOBAL",2) SetGlobal("L#LannaRelationKiller","GLOBAL",1)~ EXIT

//HAS BLADE (ELF)

CHAIN IF ~Global("L#LannaHandBridge","GLOBAL",1)~ THEN L#LANNAJ BLA.D.00
@358
END
IF~~THEN REPLY @359 EXTERN L#LANNAJ BLA.D.01
IF~~THEN REPLY @360 EXTERN L#LANNAJ BLA.D.02
IF~~THEN REPLY @361 EXTERN L#LANNAJ BLA.D.02

CHAIN L#LANNAJ BLA.D.01
@362
==L#LANNAJ @363
==L#LANNAJ @364
END
IF~~THEN REPLY @365 EXTERN L#LANNAJ BLA.D.03
IF~~THEN REPLY @366 EXTERN L#LANNAJ BLA.D.04
IF~~THEN REPLY @367 EXTERN L#LANNAJ BLA.D.02
IF~Global("L#LannaRomanceMatch","GLOBAL",1)~THEN REPLY @368 EXTERN L#LANNAJ BLA.D.R1

CHAIN L#LANNAJ BLA.D.03
@369
==L#LANNAJ @370
==L#LANNAJ @371
DO ~SetGlobal("L#LannaHandBridge","GLOBAL",2) SetGlobal("L#LannaRomanceSituation_B","GLOBAL",1)~ EXIT

CHAIN L#LANNAJ BLA.D.04
@372
==L#LANNAJ @373
DO ~SetGlobal("L#LannaHandBridge","GLOBAL",2) SetGlobal("L#LannaRomanceSituation_B","GLOBAL",1)~ EXIT

CHAIN L#LANNAJ BLA.D.02
@374
==L#LANNAJ @375
DO ~SetGlobal("L#LannaHandBridge","GLOBAL",2)~ EXIT

CHAIN L#LANNAJ BLA.D.R1
@376
==L#LANNAJ @377
==L#LANNAJ @378
==L#LANNAJ @379
==L#LANNAJ @380
DO ~SetGlobal("L#LannaHandBridge","GLOBAL",2)~ EXIT

//MYTHAL BOOK - RETURN

CHAIN IF ~Global("L#LannaBookMythal","GLOBAL",4)~ THEN L#LANNAJ M.B.R2.00
@381
==L#LANNAJ @382
==L#LANNAJ @383
DO ~SetGlobal("L#LannaBookMythal","GLOBAL",5) GiveItemCreate("bookmyt",Player1,1,1,0) AddXPObject("L#LANNA",1200)~ EXIT

//AFTER LARREL

CHAIN IF ~Global("L#LannaAfterLarrel","GLOBAL",2)~ THEN L#LANNAJ After.Larrel.00
@384
END
IF~~THEN REPLY @385 EXTERN L#LANNAJ After.Larrel.01
IF~~THEN REPLY @386 EXTERN L#LANNAJ After.Larrel.02
IF~~THEN REPLY @387 EXTERN L#LANNAJ After.Larrel.03

CHAIN L#LANNAJ After.Larrel.01
@388
EXTERN L#LANNAJ After.Larrel.04

CHAIN L#LANNAJ After.Larrel.02
@389
EXTERN L#LANNAJ After.Larrel.04

CHAIN L#LANNAJ After.Larrel.04
@390
END
IF~~THEN REPLY @391 EXTERN L#LANNAJ After.Larrel.05
IF~~THEN REPLY @392 EXTERN L#LANNAJ After.Larrel.03

CHAIN L#LANNAJ After.Larrel.05
@393
==L#LANNAJ @394
END
IF~~THEN REPLY @395 EXTERN L#LANNAJ After.Larrel.06
IF~~THEN REPLY @396 EXTERN L#LANNAJ After.Larrel.06
IF~~THEN REPLY @397 EXTERN L#LANNAJ After.Larrel.06
IF~~THEN REPLY @398 EXTERN L#LANNAJ After.Larrel.03

CHAIN L#LANNAJ After.Larrel.06
@9
==L#LANNAJ @399
==L#LANNAJ @400
DO ~SetGlobal("L#LannaAfterLarrel","GLOBAL",3)~ EXIT

CHAIN L#LANNAJ After.Larrel.03
@401
DO ~SetGlobal("L#LannaAfterLarrel","GLOBAL",3)~ EXIT

//DROW

CHAIN IF ~Global("L#LannaDrow","GLOBAL",1)~ THEN L#LANNAJ LAN.DROw.00
@402
==L#LANNAJ @403
END
IF~~THEN REPLY @404 EXTERN L#LANNAJ LAN.DROw.01
IF~~THEN REPLY @405 EXTERN L#LANNAJ LAN.DROw.02
IF~~THEN REPLY @406 EXTERN L#LANNAJ LAN.DROw.03

CHAIN L#LANNAJ LAN.DROw.01
@407
EXTERN L#LANNAJ LAN.DROw.04

CHAIN L#LANNAJ LAN.DROw.02
@408
EXTERN L#LANNAJ LAN.DROw.04

CHAIN L#LANNAJ LAN.DROw.04
@409
END
IF~~THEN REPLY @410 EXTERN L#LANNAJ LAN.DROw.05
IF~~THEN REPLY @411 EXTERN L#LANNAJ LAN.DROw.03

CHAIN L#LANNAJ LAN.DROw.05
@412
==L#LANNAJ @413
==L#LANNAJ @414
==L#LANNAJ @415
==L#LANNAJ @416
END
IF~~THEN REPLY @417 EXTERN L#LANNAJ LAN.DROw.06
IF~~THEN REPLY @418 EXTERN L#LANNAJ LAN.DROw.06
IF~~THEN REPLY @419 EXTERN L#LANNAJ LAN.DROw.07
IF~~THEN REPLY @420 EXTERN L#LANNAJ LAN.DROw.03

CHAIN L#LANNAJ LAN.DROw.06
@421
==L#LANNAJ @422
==L#LANNAJ @423
DO ~SetGlobal("L#LannaDrow","GLOBAL",2)~ EXIT

CHAIN L#LANNAJ LAN.DROw.07
@424
==L#LANNAJ @425
DO ~SetGlobal("L#LannaDrow","GLOBAL",2)~ EXIT

CHAIN L#LANNAJ LAN.DROw.03
@426
DO ~SetGlobal("L#LannaDrow","GLOBAL",2) SetGlobal("L#LannaRelationKiller","GLOBAL",1)~ EXIT

//EVAYNE //A (NON-ELF)

CHAIN IF ~!Race(Player1,ELF) Global("L#LannaElvenStatue","GLOBAL",1)~ THEN L#LANNAJ EV.NE
@427
==L#LANNAJ @428
==L#LANNAJ @429
DO ~SetGlobal("L#LannaElvenStatue","GLOBAL",2)~ EXIT

//EVAYNE //B (ELF)

CHAIN IF ~Race(Player1,ELF) Global("L#LannaElvenStatue","GLOBAL",1)~ THEN L#LANNAJ EV.00
@430
END
IF~~THEN REPLY @431 EXTERN L#LANNAJ EV.01
IF~~THEN REPLY @432 EXTERN L#LANNAJ EV.02
IF~~THEN REPLY @433 EXTERN L#LANNAJ EV.03
IF~~THEN REPLY @434 EXTERN L#LANNAJ EV.04

CHAIN L#LANNAJ EV.01
@435
EXTERN L#LANNAJ EV.05

CHAIN L#LANNAJ EV.02
@436
EXTERN L#LANNAJ EV.05

CHAIN L#LANNAJ EV.03
@437
EXTERN L#LANNAJ EV.05

CHAIN L#LANNAJ EV.05
@438
END
IF~~THEN REPLY @439 EXTERN L#LANNAJ EV.06
IF~~THEN REPLY @440 EXTERN L#LANNAJ EV.07

CHAIN L#LANNAJ EV.06
@441
==L#LANNAJ @442
END
IF~~THEN REPLY @443 EXTERN L#LANNAJ EV.08
IF~~THEN REPLY @444 EXTERN L#LANNAJ EV.07
IF~~THEN REPLY @445 EXTERN L#LANNAJ EV.09

CHAIN L#LANNAJ EV.08
@446
EXTERN L#LANNAJ EV.10

CHAIN L#LANNAJ EV.09
@447
EXTERN L#LANNAJ EV.10

CHAIN L#LANNAJ EV.10
@448
==L#LANNAJ @449
DO ~SetGlobal("L#LannaElvenStatue","GLOBAL",2) SetGlobal("L#LannaRomanceSituation_C","GLOBAL",1)~ EXIT

CHAIN L#LANNAJ EV.07
@450
DO ~SetGlobal("L#LannaElvenStatue","GLOBAL",2)~ EXIT

CHAIN L#LANNAJ EV.04
@451
DO ~SetGlobal("L#LannaElvenStatue","GLOBAL",2)~ EXIT

//BEFORE MALAVON

CHAIN IF ~Global("L#LannaMalavon","GLOBAL",1)~ THEN L#LANNAJ MALAV.00
@452
END
IF~~THEN REPLY @453 EXTERN L#LANNAJ MALAV.01
IF~~THEN REPLY @454 EXTERN L#LANNAJ MALAV.01
IF~~THEN REPLY @455 EXTERN L#LANNAJ MALAV.02
IF~~THEN REPLY @456 EXTERN L#LANNAJ MALAV.03

CHAIN L#LANNAJ MALAV.01
@457
EXTERN L#LANNAJ MALAV.04

CHAIN L#LANNAJ MALAV.02
@458
EXTERN L#LANNAJ MALAV.04

CHAIN L#LANNAJ MALAV.04
@459
END
IF~~THEN REPLY @460 EXTERN L#LANNAJ MALAV.05
IF~~THEN REPLY @461 EXTERN L#LANNAJ MALAV.03

CHAIN L#LANNAJ MALAV.05
@462
END
IF~~THEN REPLY @463 EXTERN L#LANNAJ MALAV.06
IF~~THEN REPLY @464 EXTERN L#LANNAJ MALAV.03

CHAIN L#LANNAJ MALAV.06
@465
==L#LANNAJ @466
DO ~SetGlobal("L#LannaMalavon","GLOBAL",2) GiveItemCreate("l#langif",Player1,1,1,0)~ EXIT

CHAIN L#LANNAJ MALAV.03
@467
DO ~SetGlobal("L#LannaMalavon","GLOBAL",2) SetGlobal("L#LannaRelationKiller","GLOBAL",1)~ EXIT

//ROMANCE 1

CHAIN IF ~Global("L#LannaRomanceTalk","GLOBAL",2)~ THEN L#LANNAJ ROM1.00
@468
END
IF~~THEN REPLY @469 EXTERN L#LANNAJ ROM1.01
IF~~THEN REPLY @470 EXTERN L#LANNAJ ROM1.02

CHAIN L#LANNAJ ROM1.01
@471
END
IF~Global("L#LannaRomFood","LOCALS",0)~THEN REPLY @472 DO ~SetGlobal("L#LannaRomFood","LOCALS",1)~ EXTERN L#LANNAJ ROM1.03
IF~Global("L#LannaRomPare","LOCALS",0)~THEN REPLY @473 DO ~SetGlobal("L#LannaRomPare","LOCALS",1)~ EXTERN L#LANNAJ ROM1.04
IF~Global("L#LannaRomGrou","LOCALS",0)~THEN REPLY @474 DO ~SetGlobal("L#LannaRomGrou","LOCALS",1)~ EXTERN L#LANNAJ ROM1.05
IF~~THEN REPLY @475 EXTERN L#LANNAJ ROM1.02

CHAIN L#LANNAJ ROM1.03
@476
==L#LANNAJ @477
EXTERN L#LANNAJ ROM1.06

CHAIN L#LANNAJ ROM1.04
@478
==L#LANNAJ @479
==L#LANNAJ @480
==L#LANNAJ @481
==L#LANNAJ @482
EXTERN L#LANNAJ ROM1.06

CHAIN L#LANNAJ ROM1.05
@483
==L#LANNAJ @484
==L#LANNAJ @485
EXTERN L#LANNAJ ROM1.06

CHAIN L#LANNAJ ROM1.06
@9
EXTERN L#LANNAJ ROM1.07

CHAIN L#LANNAJ ROM1.07
@486
END
IF~Global("L#LannaRomFood","LOCALS",0)~THEN REPLY @487 DO ~SetGlobal("L#LannaRomFood","LOCALS",1)~ EXTERN L#LANNAJ ROM1.03
IF~Global("L#LannaRomPare","LOCALS",0)~THEN REPLY @488 DO ~SetGlobal("L#LannaRomPare","LOCALS",1)~ EXTERN L#LANNAJ ROM1.04
IF~Global("L#LannaRomGrou","LOCALS",0)~THEN REPLY @489 DO ~SetGlobal("L#LannaRomGrou","LOCALS",1)~ EXTERN L#LANNAJ ROM1.05
IF~OR(3) Global("L#LannaRomFood","LOCALS",1) Global("L#LannaRomPare","LOCALS",1) Global("L#LannaRomGrou","LOCALS",1)~THEN REPLY @490 EXTERN L#LANNAJ ROM1.08
IF~~THEN REPLY @491 EXTERN L#LANNAJ ROM1.02

CHAIN L#LANNAJ ROM1.08
@492
==L#LANNAJ @493
END
IF~~THEN REPLY @494 EXTERN L#LANNAJ ROM1.09
IF~~THEN REPLY @495 EXTERN L#LANNAJ ROM1.10
IF~~THEN REPLY @496 EXTERN L#LANNAJ ROM1.02

CHAIN L#LANNAJ ROM1.09
@497
DO ~SetGlobal("L#LannaRomanceTalk","GLOBAL",3)~ EXIT

CHAIN L#LANNAJ ROM1.10
@498
DO ~SetGlobal("L#LannaRomanceTalk","GLOBAL",3) SetGlobal("L#LannaRelationKiller","GLOBAL",1)~ EXIT

CHAIN L#LANNAJ ROM1.02
@499
DO ~SetGlobal("L#LannaRomanceTalk","GLOBAL",3) SetGlobal("L#LannaRelationKiller","GLOBAL",1)~ EXIT

//ROMANCE 2

CHAIN IF ~Global("L#LannaRomanceTalk","GLOBAL",5)~ THEN L#LANNAJ ROM2.00
@500
END
IF~~THEN REPLY @501 EXTERN L#LANNAJ ROM2.01
IF~~THEN REPLY @502 EXTERN L#LANNAJ ROM2.01
IF~~THEN REPLY @503 EXTERN L#LANNAJ ROM2.01
IF~~THEN REPLY @504 EXTERN L#LANNAJ ROM2.01x
IF~~THEN REPLY @505 EXTERN L#LANNAJ ROM2.02

CHAIN L#LANNAJ ROM2.01
@506
END
IF~~THEN REPLY @507 EXTERN L#LANNAJ ROM2.03
IF~~THEN REPLY @508 EXTERN L#LANNAJ ROM2.03x
IF~~THEN REPLY @509 EXTERN L#LANNAJ ROM2.02

CHAIN L#LANNAJ ROM2.01x
@510
END
IF~~THEN REPLY @511 EXTERN L#LANNAJ ROM2.03
IF~~THEN REPLY @512 EXTERN L#LANNAJ ROM2.03x
IF~~THEN REPLY @509 EXTERN L#LANNAJ ROM2.02

CHAIN L#LANNAJ ROM2.03
@513
END
IF~~THEN REPLY @514 EXTERN L#LANNAJ ROM2.04
IF~~THEN REPLY @515 EXTERN L#LANNAJ ROM2.02

CHAIN L#LANNAJ ROM2.03x
@516
END
IF~~THEN REPLY @517 EXTERN L#LANNAJ ROM2.04
IF~~THEN REPLY @518 EXTERN L#LANNAJ ROM2.02

CHAIN L#LANNAJ ROM2.04
@519
END
IF~~THEN REPLY @520 EXTERN L#LANNAJ ROM2.05
IF~~THEN REPLY @521 EXTERN L#LANNAJ ROM2.06
IF~~THEN REPLY @522 EXTERN L#LANNAJ ROM2.02

CHAIN L#LANNAJ ROM2.05
@523
==L#LANNAJ @524
DO ~SetGlobal("L#LannaRomanceTalk","GLOBAL",6)~ EXIT

CHAIN L#LANNAJ ROM2.06
@525
==L#LANNAJ @526
==L#LANNAJ @527
DO ~SetGlobal("L#LannaRomanceTalk","GLOBAL",6)~ EXIT

CHAIN L#LANNAJ ROM2.02
@528
DO ~SetGlobal("L#LannaRomanceTalk","GLOBAL",6) SetGlobal("L#LannaRelationKiller","GLOBAL",1)~ EXIT

//ROMANCE 3

CHAIN IF ~Global("L#LannaRomanceTalk","GLOBAL",8)~ THEN L#LANNAJ ROM3.00
@529
END
IF~~THEN REPLY @530 EXTERN L#LANNAJ ROM3.01
IF~~THEN REPLY @531 EXTERN L#LANNAJ ROM3.02

CHAIN L#LANNAJ ROM3.01
@532
END
IF~~THEN REPLY @533 EXTERN L#LANNAJ ROM3.03
IF~~THEN REPLY @534 EXTERN L#LANNAJ ROM3.02

CHAIN L#LANNAJ ROM3.03
@535
==L#LANNAJ @536
==L#LANNAJ @537
==L#LANNAJ @538
==L#LANNAJ @539
END
IF~~THEN REPLY @540 EXTERN L#LANNAJ ROM3.04
IF~~THEN REPLY @541 EXTERN L#LANNAJ ROM3.05
IF~~THEN REPLY @542 EXTERN L#LANNAJ ROM3.06
IF~~THEN REPLY @543 EXTERN L#LANNAJ ROM3.02

CHAIN L#LANNAJ ROM3.04
@544
==L#LANNAJ @545
DO ~SetGlobal("L#LannaRomanceTalk","GLOBAL",9)~ EXIT

CHAIN L#LANNAJ ROM3.05
@546
==L#LANNAJ @547
DO ~SetGlobal("L#LannaRomanceTalk","GLOBAL",9)~ EXIT

CHAIN L#LANNAJ ROM3.06
@548
==L#LANNAJ @549
==L#LANNAJ @550
DO ~SetGlobal("L#LannaRomanceTalk","GLOBAL",9)~ EXIT

CHAIN L#LANNAJ ROM3.02
@551
DO ~SetGlobal("L#LannaRomanceTalk","GLOBAL",9) SetGlobal("L#LannaRelationKiller","GLOBAL",1)~ EXIT

//ROMANCE 4

CHAIN IF ~Global("L#LannaRomanceTalk","GLOBAL",11)~ THEN L#LANNAJ ROM4.00
@552
END
IF~~THEN REPLY @553 EXTERN L#LANNAJ ROM4.01
IF~~THEN REPLY @554 EXTERN L#LANNAJ ROM4.02

CHAIN L#LANNAJ ROM4.01
@555
END
IF~~THEN REPLY @556 EXTERN L#LANNAJ ROM4.03
IF~~THEN REPLY @557 EXTERN L#LANNAJ ROM4.03
IF~~THEN REPLY @558 EXTERN L#LANNAJ ROM4.02

CHAIN L#LANNAJ ROM4.03
@559
END
IF~~THEN REPLY @560 EXTERN L#LANNAJ ROM4.04
IF~~THEN REPLY @561 EXTERN L#LANNAJ ROM4.02

CHAIN L#LANNAJ ROM4.04
@562
==L#LANNAJ @563
==L#LANNAJ @564
==L#LANNAJ @565
DO ~SetGlobal("L#LannaRomanceTalk","GLOBAL",12) RestParty()~ EXIT

CHAIN L#LANNAJ ROM4.02
@566
DO ~SetGlobal("L#LannaRomanceTalk","GLOBAL",12) SetGlobal("L#LannaRelationKiller","GLOBAL",1) RestParty()~ EXIT

//ROMANCE 5 (DAY AFTER SEX)

CHAIN IF ~Global("L#LannaRomanceTalk","GLOBAL",12)~ THEN L#LANNAJ ROM5.00
@567
END
IF~~THEN REPLY @568 EXTERN L#LANNAJ ROM5.01
IF~~THEN REPLY @569 EXTERN L#LANNAJ ROM5.01
IF~~THEN REPLY @570 EXTERN L#LANNAJ ROM5.02

CHAIN L#LANNAJ ROM5.01
@571
==L#LANNAJ @572
DO ~SetGlobal("L#LannaRomanceTalk","GLOBAL",13) SetGlobal("L#LannaRomanceActive","GLOBAL",2)~ EXIT

CHAIN L#LANNAJ ROM5.02
@573
DO ~SetGlobal("L#LannaRomanceTalk","GLOBAL",13) SetGlobal("L#LannaRelationKiller","GLOBAL",1)~ EXIT

//ROMANCE 6 (final timered)

CHAIN IF ~Global("L#LannaRomanceTalk","GLOBAL",15)~ THEN L#LANNAJ ROM6.00
@574
==L#LANNAJ @575
DO ~SetGlobal("L#LannaRomanceTalk","GLOBAL",16)~ EXIT

//ROMANCE FINALE - EASTHAVEN

CHAIN IF ~Global("L#LannaRomanceFinalTalk","GLOBAL",2)~ THEN L#LANNAJ ROM7.00
@576
END
IF~~THEN REPLY @25 EXTERN L#LANNAJ ROM7.01
IF~~THEN REPLY @577 DO ~SetGlobal("L#LannaRomanceFinalTalk","GLOBAL",3) SetGlobal("L#LannaRelationKiller","GLOBAL",1)~ EXIT

CHAIN L#LANNAJ ROM7.01
@578
==L#LANNAJ @579
==L#LANNAJ @580
END
IF~~THEN REPLY @581 EXTERN L#LANNAJ ROM7.02
IF~~THEN REPLY @582 EXTERN L#LANNAJ ROM7.03
IF~~THEN REPLY @583 EXTERN L#LANNAJ ROM7.04
IF~~THEN REPLY @584 DO ~SetGlobal("L#LannaRomanceFinalTalk","GLOBAL",3) SetGlobal("L#LannaRelationKiller","GLOBAL",1)~ EXIT

CHAIN L#LANNAJ ROM7.02
@585
DO ~SetGlobal("L#LannaRomanceFinalTalk","GLOBAL",3)~ EXIT

CHAIN L#LANNAJ ROM7.03
@586
==L#LANNAJ @587
DO ~SetGlobal("L#LannaRomanceFinalTalk","GLOBAL",3)~ EXIT

CHAIN L#LANNAJ ROM7.04
@588
DO ~SetGlobal("L#LannaRomanceFinalTalk","GLOBAL",3)~ EXIT

//HoW 1

CHAIN IF ~Global("L#LannaHoWTalks","GLOBAL",1)~ THEN L#LANNAJ HOW1.00
@589
==L#LANNAJ @590
END
IF~~THEN REPLY @591 EXTERN L#LANNAJ HOW1.01
IF~~THEN REPLY @592 EXTERN L#LANNAJ HOW1.02

CHAIN L#LANNAJ HOW1.01
@593
END
IF~~THEN REPLY @86 EXTERN L#LANNAJ HOW1.03
IF~~THEN REPLY @594 EXTERN L#LANNAJ HOW1.03
IF~~THEN REPLY @595 EXTERN L#LANNAJ HOW1.02

CHAIN L#LANNAJ HOW1.03
@596
END
IF~~THEN REPLY @597 EXTERN L#LANNAJ HOW1.04
IF~~THEN REPLY @598 EXTERN L#LANNAJ HOW1.05
IF~~THEN REPLY @599 EXTERN L#LANNAJ HOW1.02

CHAIN L#LANNAJ HOW1.04
@600
EXTERN L#LANNAJ HOW1.06

CHAIN L#LANNAJ HOW1.05
@601
EXTERN L#LANNAJ HOW1.06

CHAIN L#LANNAJ HOW1.06
@602
END
IF~~THEN REPLY @603 EXTERN L#LANNAJ HOW1.07
IF~~THEN REPLY @604 EXTERN L#LANNAJ HOW1.08

CHAIN L#LANNAJ HOW1.07
@605
==L#LANNAJ @606
DO ~SetGlobal("L#LannaHoWTalks","GLOBAL",2)~ EXIT

CHAIN L#LANNAJ HOW1.08
@607
==L#LANNAJ @608
DO ~SetGlobal("L#LannaHoWTalks","GLOBAL",2)~ EXIT

CHAIN L#LANNAJ HOW1.02
@609
DO ~SetGlobal("L#LannaHoWTalks","GLOBAL",2)~ EXIT

//HoW 2

CHAIN IF ~Global("L#LannaHoWTalks","GLOBAL",3)~ THEN L#LANNAJ HOW2.00
@610
==L#LANNAJ @611
END
IF~~THEN REPLY @612 EXTERN L#LANNAJ HOW2.01
IF~~THEN REPLY @613 EXTERN L#LANNAJ HOW2.02

CHAIN L#LANNAJ HOW2.01
@614
==L#LANNAJ @615
DO ~SetGlobal("L#LannaHoWTalks","GLOBAL",4)~ EXIT

CHAIN L#LANNAJ HOW2.02
@616
DO ~SetGlobal("L#LannaHoWTalks","GLOBAL",4)~ EXIT


//////////////////////////////////////////////////////
////////////////// PID ///////////////////////////////
//////////////////////////////////////////////////////

CHAIN IF ~IsGabber(Player1)~ THEN L#LANNAJ PID.00.00.00
@617
END
IF~PartyHasItem("L#LANOIL") PartyHasItem("L#LANSWO")~THEN REPLY @618 EXTERN L#LANNAJ PID.0B.0B.00
IF~RandomNum(2,1)~THEN REPLY @619 EXTERN L#LANNAJ PID.01.01.00
IF~RandomNum(2,2)~THEN REPLY @619 EXTERN L#LANNAJ PID.01.02.00
IF~RandomNum(2,1)~THEN REPLY @620 EXTERN L#LANNAJ PID.02.01.00
IF~RandomNum(2,2)~THEN REPLY @620 EXTERN L#LANNAJ PID.02.02.00
IF~RandomNum(2,1)~THEN REPLY @621 EXTERN L#LANNAJ PID.03.01.00
IF~RandomNum(2,2)~THEN REPLY @621 EXTERN L#LANNAJ PID.03.02.00
IF~~THEN REPLY @622 EXTERN L#LANNAJ PID.04.01.00
IF~~THEN REPLY @623 EXTERN L#LANNAJ PID.05.01.00
IF~~THEN REPLY @624 EXTERN L#LANNAJ PID.06.01.00
IF~Global("L#LannaRomanceMatch","GLOBAL",1) !Global("L#LannaRomanceActive","GLOBAL",3)~THEN REPLY @625 EXTERN L#LANNAJ PID.R1.01.00
IF~Global("L#LannaRomanceMatch","GLOBAL",1) !Global("L#LannaRomanceActive","GLOBAL",3)~THEN REPLY @626 EXTERN L#LANNAJ PID.R2.01.00
IF~Global("L#LannaRomanceMatch","GLOBAL",1) !Global("L#LannaRomanceActive","GLOBAL",3)~THEN REPLY @627 EXTERN L#LANNAJ PID.R3.01.00
IF~Global("L#LannaRomanceMatch","GLOBAL",1) !Global("L#LannaRomanceActive","GLOBAL",3)~THEN REPLY @628 EXTERN L#LANNAJ PID.R4.01.00
IF~OR(2) Global("L#LannaRomanceActive","GLOBAL",1) Global("L#LannaRomanceActive","GLOBAL",2)~THEN REPLY @629 EXTERN L#LANNAJ PID.R5.01.00
IF~OR(2) Global("L#LannaRomanceActive","GLOBAL",1) Global("L#LannaRomanceActive","GLOBAL",2)~THEN REPLY @630 EXTERN L#LANNAJ PID.R6.01.00
IF~OR(2) Global("L#LannaRomanceActive","GLOBAL",1) Global("L#LannaRomanceActive","GLOBAL",2)~THEN REPLY @631 EXTERN L#LANNAJ PID.R7.01.00
IF~OR(2) Global("L#LannaRomanceActive","GLOBAL",1) Global("L#LannaRomanceActive","GLOBAL",2)~THEN REPLY @632 EXTERN L#LANNAJ PID.R8.01.00
IF~OR(2) Global("L#LannaRomanceActive","GLOBAL",1) Global("L#LannaRomanceActive","GLOBAL",2)~THEN REPLY @633 EXTERN L#LANNAJ PID.R9.01.00
IF~RandomNum(2,1) Global("L#LannaRomanceActive","GLOBAL",2)~THEN REPLY @634 EXTERN L#LANNAJ PID.R10.01.00
IF~RandomNum(2,2) Global("L#LannaRomanceActive","GLOBAL",2)~THEN REPLY @634 EXTERN L#LANNAJ PID.R10.02.00
IF~RandomNum(2,1) Global("L#LannaRomanceActive","GLOBAL",2)~THEN REPLY @635 EXTERN L#LANNAJ PID.R11.01.00
IF~RandomNum(2,2) Global("L#LannaRomanceActive","GLOBAL",2)~THEN REPLY @635 EXTERN L#LANNAJ PID.R11.02.00
IF~RandomNum(2,1) Global("L#LannaRomanceActive","GLOBAL",2)~THEN REPLY @636 EXTERN L#LANNAJ PID.R12.01.00
IF~RandomNum(2,2) Global("L#LannaRomanceActive","GLOBAL",2)~THEN REPLY @636 EXTERN L#LANNAJ PID.R12.02.00
IF~RandomNum(2,1) Global("L#LannaRomanceActive","GLOBAL",2)~THEN REPLY @637 EXTERN L#LANNAJ PID.R13.01.00
IF~RandomNum(2,2) Global("L#LannaRomanceActive","GLOBAL",2)~THEN REPLY @637 EXTERN L#LANNAJ PID.R13.02.00
IF~RandomNum(2,1) Global("L#LannaRomanceActive","GLOBAL",2)~THEN REPLY @638 EXTERN L#LANNAJ PID.R14.01.00
IF~RandomNum(2,2) Global("L#LannaRomanceActive","GLOBAL",2)~THEN REPLY @638 EXTERN L#LANNAJ PID.R14.02.00
IF~RandomNum(2,1) Global("L#LannaRomanceActive","GLOBAL",2)~THEN REPLY @639 EXTERN L#LANNAJ PID.R15.01.00
IF~RandomNum(2,2) Global("L#LannaRomanceActive","GLOBAL",2)~THEN REPLY @639 EXTERN L#LANNAJ PID.R15.02.00
IF~OR(2) Global("L#LannaRomanceActive","GLOBAL",1) Global("L#LannaRomanceActive","GLOBAL",2)~THEN REPLY @640 EXTERN L#LANNAJ PID.RE.01.00
IF~~THEN REPLY @641 EXTERN L#LANNAJ PID.FIX
IF~~THEN REPLY @642 EXIT

CHAIN L#LANNAJ PID.0B.0B.00
@643
==L#LANNAJ @644
DO ~StartCutSceneMode() Wait(1) PlaySound("#EFF_M13") CreateVisualEffectObject("L#LATHUN","L#LANNA") TakePartyItem("L#LANOIL") DestroyItem("L#LANOIL") DestroyItem("l#lanswo") ApplySpellRES("L#LANSW2","L#LANNA") XEquipItem("L#LANSW2","L#LANNA",SLOT_WEAPON2,EQUIP) EndCutSceneMode()~ EXIT

CHAIN L#LANNAJ PID.01.01.00
@645
==L#LANNAJ @646
EXIT

CHAIN L#LANNAJ PID.01.02.00
@647
==L#LANNAJ @648
EXIT

CHAIN L#LANNAJ PID.02.01.00
@649
==L#LANNAJ @650
==L#LANNAJ @651
EXIT

CHAIN L#LANNAJ PID.02.02.00
@652
==L#LANNAJ @653
==L#LANNAJ @654
EXIT

CHAIN L#LANNAJ PID.03.01.00
@655
==L#LANNAJ @656
EXIT

CHAIN L#LANNAJ PID.03.02.00
@657
==L#LANNAJ @658
EXIT

CHAIN L#LANNAJ PID.04.01.00
@659
==L#LANNAJ @660
EXIT

CHAIN L#LANNAJ PID.05.01.00
@661
==L#LANNAJ @662
EXIT

CHAIN L#LANNAJ PID.06.01.00
@663
==L#LANNAJ @664
==L#LANNAJ @665
==L#LANNAJ @666
EXIT

CHAIN L#LANNAJ PID.R1.01.00
@667
==L#LANNAJ @668
EXIT

CHAIN L#LANNAJ PID.R2.01.00
@669
==L#LANNAJ @670
EXIT

CHAIN L#LANNAJ PID.R3.01.00
@671
EXIT

CHAIN L#LANNAJ PID.R4.01.00
@672
==L#LANNAJ @673
EXIT

CHAIN L#LANNAJ PID.R5.01.00
@674
==L#LANNAJ @675
EXIT

CHAIN L#LANNAJ PID.R6.01.00
@676
==L#LANNAJ @677
EXIT

CHAIN L#LANNAJ PID.R7.01.00
@678
EXIT

CHAIN L#LANNAJ PID.R8.01.00
@679
EXIT

CHAIN L#LANNAJ PID.R9.01.00
@680
==L#LANNAJ @681
EXIT

CHAIN L#LANNAJ PID.R10.01.00
@682
==L#LANNAJ @683
==L#LANNAJ @684
EXIT

CHAIN L#LANNAJ PID.R10.02.00
@685
==L#LANNAJ @686
EXIT

CHAIN L#LANNAJ PID.R11.01.00
@687
==L#LANNAJ @688
EXIT

CHAIN L#LANNAJ PID.R11.02.00
@689
==L#LANNAJ @690
EXIT

CHAIN L#LANNAJ PID.R12.01.00
@691
==L#LANNAJ @692
==L#LANNAJ @693
EXIT

CHAIN L#LANNAJ PID.R12.02.00
@694
EXIT

CHAIN L#LANNAJ PID.R13.01.00
@695
==L#LANNAJ @696
EXIT

CHAIN L#LANNAJ PID.R13.02.00
@697
==L#LANNAJ @698
EXIT

CHAIN L#LANNAJ PID.R14.01.00
@699
==L#LANNAJ @700
EXIT

CHAIN L#LANNAJ PID.R14.02.00
@701
==L#LANNAJ @702
EXIT

CHAIN L#LANNAJ PID.R15.01.00
@703
EXIT

CHAIN L#LANNAJ PID.R15.02.00
@704
EXIT

CHAIN L#LANNAJ PID.RE.01.00
@705
DO ~SetGlobal("L#LannaRomanceActive","GLOBAL",3)~ EXIT

CHAIN L#LANNAJ PID.FIX
@706
DO ~ClearAllActions()
StartCutSceneMode()
StartCutScene("L#LANFIX")~ EXIT

